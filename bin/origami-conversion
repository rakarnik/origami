#!/usr/bin/perl

use strict;

sub tobedpe {
  my $c = $_[0];
  while(<F>) {
    chomp;
    my @arr = split/,/;
  
    print "$arr[0]\t$arr[1]\t$arr[2]\t$arr[3]\t$arr[4]\t$arr[5]\tInteraction\t$arr[5+$c]\t.\t.\n";
  }
}

if( $#ARGV < 2 ) {
  die "origami-conversion <bedpe> <results file> <score column>";
}

my $option = $ARGV[0];
my $file = $ARGV[1];
my $column = $ARGV[2];

die "$file does not exist" unless -e $file;
die "Score column is not a number" unless $column =~ /\d+/;

open(F,"$file") or die "Cannot open $!";
<F>; # discard header line

tobedpe($column);

close(F);